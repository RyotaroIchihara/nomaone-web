---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/Hero.astro';
import { getSiteData } from '../../data/load';
import { formatPhoneForDisplay, formatPhoneForTel } from '../../utils/format';
import contactHeroImage from '../../assets/images/hero/contact-hero.jpg';

const data = await getSiteData();
const { contact, office } = data;
const { tel_fax } = office.contacts;

const pageTitle = 'お問い合わせ';
const pageDescription = 'サービスに関するご相談・お問い合わせはこちらからお願いします。メール・電話・専用フォームでお気軽にご連絡ください。';
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <Hero
    title={pageTitle}
    description={pageDescription}
    image={contactHeroImage}
    imageAlt="つながりを表現する温かな手"
    size="sm"
  />

  <div class="section">
    <div class="container">
      <div class="max-w-3xl mx-auto">
        <!-- お問い合わせ注記 -->
        <div class="text-center mb-12">
          <p class="text-gray-600">{contact.note}</p>
        </div>

        <!-- 連絡手段 -->
        <div class="grid gap-8 md:grid-cols-2 mb-12">
          <!-- フォーム -->
          <div class="card text-center">
            <svg
              class="w-12 h-12 mx-auto mb-4 text-primary-600"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect width="20" height="16" x="2" y="4" rx="2"/>
              <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
            </svg>
            <h2 class="text-xl font-bold mb-4">お問い合わせフォーム</h2>
            <p class="text-gray-600 mb-6">
              24時間受付可能です。<br>
              内容確認後、担当者からご連絡いたします。
            </p>
            <a
              href={contact.inquiry_url}
              class="btn-primary w-full justify-center"
              target="_blank"
              rel="noopener noreferrer"
            >
              フォームで問い合わせ
              <svg
                class="w-5 h-5 ml-2"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M7 17l9.2-9.2M17 17V7H7"/>
              </svg>
            </a>
          </div>

          <!-- 電話 -->
          <div class="card text-center">
            <svg
              class="w-12 h-12 mx-auto mb-4 text-primary-600"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
            <h2 class="text-xl font-bold mb-4">お電話</h2>
            <p class="text-gray-600 mb-6">
              営業時間内でのご対応となります。<br>
              担当者が不在の場合は折り返しご連絡いたします。
            </p>
            <a
              href={formatPhoneForTel(tel_fax)}
              class="btn-primary w-full justify-center"
            >
              {formatPhoneForDisplay(tel_fax)}に電話
              <svg
                class="w-5 h-5 ml-2"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- メール -->
        <div class="text-center">
          <p class="text-gray-600 mb-4">
            メールでのお問い合わせも受け付けております：
          </p>
          <a
            href={`mailto:${contact.email}`}
            class="inline-flex items-center text-primary-600 hover:text-primary-500"
          >
            <svg
              class="w-5 h-5 mr-2"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <rect width="20" height="16" x="2" y="4" rx="2"/>
              <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/>
            </svg>
            {contact.email}
          </a>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>
